<template>
    <!-- 不同类型玩法选号  -->
    <div class="quick_gametype_box">
        <div class="quick_gametype box_h" v-for="(item,index) in gametype.GameAry" :key="index" :data-id="item.Id">
            <!-- 标题 -->
            <div v-if="navid != 121 && navid != 122 && navid != 124 && navid != 126" class="qu_gametype_title box_s">
                <p>{{item.Title}}</p>
            </div>
            <!-- 号码列表 -->
            <div v-if="navid == 121" class="dice_itm">
                <div :class="['dice_itm_con',value.code==1?'select_dice_img big_icon':'']" v-for="(value,index) in item.List" :key="index" :data-code="value.code" :data-id="item.Id" :data-index="index" @click="choiceNum">
                    <div :class="['dice_itm_num','img_'+value.text]"></div>
                    <div :class="['dice_itm_num','img_'+value.text]"></div>
                    <div :class="['dice_itm_num','img_'+value.text]"></div>
                </div>
            </div>
            <div v-else-if="navid == 122 || navid == 126" class="dice_itm1">
                <div :class="['box_s',value.code==1?'select_dice_img big_icon':'',value.text == '1'?'dice_img1':value.text == '2'?'dice_img2':value.text == '3'?'dice_img3':value.text == '4'?'dice_img4':value.text == '5'?'dice_img5':'dice_img6']"
                      v-for="(value,index) in item.List" :key="index"
                      :data-code="value.code" :data-id="item.Id" :data-index="index" @click="choiceNum">
                </div>
            </div>
            <div v-else-if="navid == 124" class="dice_itm2">
                <div :class="['dice_itm_con',value.code==1?'select_dice_img big_icon':'']" v-for="(value,index) in item.List" :key="index" :data-code="value.code" :data-id="item.Id" :data-index="index" @click="choiceNum">
                    <div :class="['dice_itm_num','dice_img'+value.text]"></div>
                    <div :class="['dice_itm_num','dice_img'+value.text]"></div>
                </div>
            </div>
            <div v-else class="qu_gametype_numbox box_h box_flex">
                <div :class="['box_s',value.code==1?'change_this_style big_icon':'']"
                      v-for="(value,index) in item.List" :key="index"
                      :data-code="value.code" :data-id="item.Id" :data-index="index" @click="choiceNum">
                    {{value.text}}
                </div>
            </div>
            <!-- 功能按钮 -->
            <div class="box_h qu_gamebtn_box">
                <div :data-id="item.Id" @click="btnCilck">全</div>
                <div :data-id="item.Id" @click="btnCilck">大</div>
                <div :data-id="item.Id" @click="btnCilck">小</div>
                <div :data-id="item.Id" @click="btnCilck">奇</div>
                <div :data-id="item.Id" @click="btnCilck">偶</div>
                <div :data-id="item.Id" @click="btnCilck">清</div>
            </div>
        </div>
    </div>
</template>

<script>
  export default {
    props: {
      gametype: {
        type: Object,
        required: true
      },
      navid: {
        type: Number,
        required: true
      }
    },
    created() {
    },
    data() {
      return {
        num: 0, //游戏id（121为三同号单选，122为三不同号，124二同号复选，125为二同号单选，126为2同号单选）
        obj: this.gametype,
        selectAry: [], //返回子组件的值
      }
    },
    methods: {

      // 选择号码
      choiceNum(e) {
        let that = this
        let code = e.currentTarget.dataset.code
        let indexs = e.currentTarget.dataset.index
        let num = e.currentTarget.dataset.id
        // 单个数组
        that.gametype.GameAry.forEach(item => {
          if (item.Id == num) {
            if (code == 0) {
              item.List[indexs].code = 1
              that.selectAry.push(item.List[indexs].value)
              this.$emit("setary", that.selectAry)
            } else {
              item.List[indexs].code = 0
              let ids = that.selectAry.indexOf(item.List[indexs].value)
              if (ids > -1) {
                that.selectAry.splice(ids, 1)
              }
              this.$emit("setary", that.selectAry)
            }

          }
        });
        that.algorithm()

      },
      // 注数算法
      algorithm() {
        let that = this
        let num = that.gametype.GameIds
        // 三不同号单选
        if (num == 122) {
          let num = parseInt(that.selectAry.length);
          if (num >= 3) {
            let result = (num - 2) * (num - 1) * num / 6
            that.$emit("setbet", result)
          } else {
            that.$emit("setbet", 0)
          }
        }
        //二同号单选
        if (num == 126) {
          let num = parseInt(that.selectAry.length);
          if (num >= 2) {
            let result = ((num - 1) * (num - 1) + num - 1) / 2
            that.$emit("setbet", result)
          } else {
            that.$emit("setbet", 0)
          }
        }
      },
      //功能按钮
      btnCilck(e) {
        let that = this
        let name = e.currentTarget.innerText;
        let id = e.currentTarget.dataset.id;
        that.selectAry = []
        if (that.gametype.GameAry.length < 2) {
          that.gametype.GameAry.forEach(item => {
            for (let i = 0; i < item.List.length; i++) {
              item.List[i].code = 0
              if (name == "全") {
                item.List[i].code = 1
                that.selectAry.push(item.List[i].value)
                this.$emit("setary", that.selectAry)
              } else if (name == "大") {
                if (i > 2) {
                  item.List[i].code = 1
                  that.selectAry.push(item.List[i].value)
                  this.$emit("setary", that.selectAry)
                }
              } else if (name == "小") {
                if (i < 3) {
                  item.List[i].code = 1
                  that.selectAry.push(item.List[i].value)
                  this.$emit("setary", that.selectAry)
                }
              } else if (name == "清") {
                item.List[i].code = 0
                this.$emit("setary", that.selectAry)
              } else if (name == "奇") {
                if (i % 2 == 0) {
                  item.List[i].code = 1
                  that.selectAry.push(item.List[i].value)
                  this.$emit("setary", that.selectAry)
                }
              } else if (name == "偶") {
                if (i % 2 != 0) {
                  item.List[i].code = 1
                  that.selectAry.push(item.List[i].value)
                  this.$emit("setary", that.selectAry)
                }
              }
            }
            that.algorithm()
          })
        }
      }
    }
  }
</script>

<style lang="scss" scoped>
    .quick_gametype_box {
        width: 100%;
        overflow: hidden;
        padding: 8px 0;

        .quick_gametype{
          display: flex;
          justify-content: space-between;
          align-items: center;

            .qu_gametype_title {
                height: 50px;
                text-align: center;
                font-size: 12px;
                color: #8e8e8e;
                line-height: 22px;
                justify-content: center;

                p {
                    padding: 0 10px;
                    color: #666666;
                    font-size: 14px;
                    font-weight: bold;
                    line-height: 40px;
                    border-radius: 5px;
                }
            }

            .dice_itm{
                display:flex;
                justify-content:space-around;
                flex-wrap: wrap;
                width:400px;

                .dice_itm_con{
                    display:flex;
                    justify-content: space-between;
                    align-items: center;
                    flex-wrap: nowrap;
                    width: 115px;
                    height: 59px;
                    cursor: pointer;

                    .dice_itm_num{
                        width: 36px;
                        height: 36px;
                        background-size: 100%;

                        &.img_111 {
                            background-image: url(../../assets/img/kuaisan/1.png);
                        }

                        &.img_222 {
                            background-image: url(../../assets/img/kuaisan/2.png);
                        }

                        &.img_333 {
                            background-image: url(../../assets/img/kuaisan/3.png);
                        }

                        &.img_444 {
                            background-image: url(../../assets/img/kuaisan/4.png);
                        }

                        &.img_555 {
                            background-image: url(../../assets/img/kuaisan/5.png);
                        }

                        &.img_666 {
                            background-image: url(../../assets/img/kuaisan/6.png);
                        }
                    }
                    
                    &.select_dice_img{
                        background: none;

                        .dice_itm_num{
                            width: 36px;
                            height: 36px;
                            border-radius: 6px;
                            background-size: 100%;

                            &.img_111 {
                                background-image: url(../../assets/img/kuaisan/1_a.png);
                            }

                            &.img_222 {
                                background-image: url(../../assets/img/kuaisan/2_a.png);
                            }

                            &.img_333 {
                                background-image: url(../../assets/img/kuaisan/3_a.png);
                            }

                            &.img_444 {
                                background-image: url(../../assets/img/kuaisan/4_a.png);
                            }

                            &.img_555 {
                                background-image: url(../../assets/img/kuaisan/5_a.png);
                            }

                            &.img_666 {
                                background-image: url(../../assets/img/kuaisan/6_a.png);
                            }
                        }
                    }
                }
            }

            .dice_itm1{
                width: 648px;

                div{
                    display: inline-block;
                    width: 36px;
                    height: 36px;
                    margin: 0 10px;
                    background-size: 100%;
                    cursor: pointer;

                    &.dice_img1 {
                        background-image: url(../../assets/img/kuaisan/1.png);
                    }

                    &.dice_img2 {
                        background-image: url(../../assets/img/kuaisan/2.png);
                    }

                    &.dice_img3 {
                        background-image: url(../../assets/img/kuaisan/3.png);
                    }

                    &.dice_img4 {
                        background-image: url(../../assets/img/kuaisan/4.png);
                    }

                    &.dice_img5 {
                        background-image: url(../../assets/img/kuaisan/5.png);
                    }

                    &.dice_img6 {
                        background-image: url(../../assets/img/kuaisan/6.png);
                    }

                    &.select_dice_img{

                        &.dice_img1 {
                            background-image: url(../../assets/img/kuaisan/1_a.png);
                        }

                        &.dice_img2 {
                            background-image: url(../../assets/img/kuaisan/2_a.png);
                        }

                        &.dice_img3 {
                            background-image: url(../../assets/img/kuaisan/3_a.png);
                        }

                        &.dice_img4 {
                            background-image: url(../../assets/img/kuaisan/4_a.png);
                        }

                        &.dice_img5 {
                            background-image: url(../../assets/img/kuaisan/5_a.png);
                        }

                        &.dice_img6 {
                            background-image: url(../../assets/img/kuaisan/6_a.png);
                        }  
                    }
                }  
            }

            .dice_itm2{
                display: flex;
                justify-content: flex-start;
                flex-wrap: wrap;
                width: 648px;

                .dice_itm_con{
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    width: 80px;
                    height: 59px;
                    margin: 0 10px;
                    cursor: pointer;

                    .dice_itm_num{
                        width: 36px;
                        height: 36px;
                        background-size: 100%;

                        &.dice_img11 {
                            background-image: url(../../assets/img/kuaisan/1.png);
                        }

                        &.dice_img22 {
                            background-image: url(../../assets/img/kuaisan/2.png);
                        }

                        &.dice_img33 {
                            background-image: url(../../assets/img/kuaisan/3.png);
                        }

                        &.dice_img44 {
                            background-image: url(../../assets/img/kuaisan/4.png);
                        }

                        &.dice_img55 {
                            background-image: url(../../assets/img/kuaisan/5.png);
                        }

                        &.dice_img66 {
                            background-image: url(../../assets/img/kuaisan/6.png);
                        } 
                    }

                    &.select_dice_img{

                        .dice_img11 {
                            background-image: url(../../assets/img/kuaisan/1_a.png);
                        }

                        .dice_img22 {
                            background-image: url(../../assets/img/kuaisan/2_a.png);
                        }

                        .dice_img33 {
                            background-image: url(../../assets/img/kuaisan/3_a.png);
                        }

                        .dice_img44 {
                            background-image: url(../../assets/img/kuaisan/4_a.png);
                        }

                        .dice_img55 {
                            background-image: url(../../assets/img/kuaisan/5_a.png);
                        }

                        .dice_img66 {
                            background-image: url(../../assets/img/kuaisan/6_a.png);
                        }
                        
                    }
                }
            }

            .qu_gametype_numbox {
                overflow: hidden;
                text-align: center;
                margin-left: 13px;
                padding: 5px 0;

                .change_this_style {
                    background-color: #008573;
                }

                div {
                    align-items: center;
                    justify-content: center;
                    width: 80px;
                    cursor: pointer;
                    margin: 0 5px;
                    font-size: 18px;
                    border-radius: 5px;
                }
            }

            .qu_gamebtn_box {
                width: 218px;
                height: 40px;
                margin-top: 5px;
                padding: 0 5px;
                justify-content: space-around;
                justify-items: center;
                -webkit-box-align: center;
                -ms-flex-align: center;
                align-items: center;

                div {
                    display: inline-block;
                    text-align: center;
                    width: 26px;
                    height: 30px;
                    line-height: 30px;
                    border: 1px solid #D8DEE8;
                    border-radius: 13px;
                    font-size: 14px;
                    color: #4E627A;
                    cursor: pointer;

                    &:hover {
                        border: none;
                        color: #ffffff;
                        background-color: #008573;
                    }
                }
            }
        }
    }  
</style>